<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Picker Example</title>

   <script type="text/javascript" src="https://apis.google.com/js/api.js?onload=onApiLoad2"></script>
<script>
    function onApiLoad2(){
        gapi.load('auth',{'callback':onAuthApiLoad2}); 
        gapi.load('picker'); 
    }
    function onAuthApiLoad2(){
        window.gapi.auth.authorize({
            'client_id':'359836101221-q2ed4utjn4cil132qugqgs7jcliq9d14.apps.googleusercontent.com',
            'scope':['https://www.googleapis.com/auth/drive']
        },handleAuthResult);
    } 
    var oauthToken2;
    function handleAuthResult(authResult){
        if(authResult && !authResult.error){
            oauthToken2 = authResult.access_token;
            createPicker2();
        }
    }
    function createPicker2(){    
        var picker = new google.picker.PickerBuilder()
            .addView(new google.picker.DocsUploadView())
            .addView(new google.picker.DocsView())                
            .setOAuthToken(oauthToken2)
            .setDeveloperKey('AIzaSyCgqzGXv63oSkbXqRTaBNcyP_tZb0roqLU')
            .setCallback(pickerCallback2)
            .build();
        picker.setVisible(true);
    }

    function pickerCallback2(data) {
        var url = 'nothing';
        if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
          var doc = data[google.picker.Response.DOCUMENTS][0];
          url = doc[google.picker.Document.URL];
        }
        var message = 'You picked: ' + url;
        document.getElementById('result2222').innerHTML = message;
      }
</script>
  </head>
  <body>
    <div id="result2222"></div>
    <script type="text/javascript" src="https://apis.google.com/js/api.js?onload=onApiLoad2"></script>
  </body>
</html>
